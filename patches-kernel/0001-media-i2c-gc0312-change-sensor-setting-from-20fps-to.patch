From 0cc3fd09861033923b419521cdee7c7a9d3595ec Mon Sep 17 00:00:00 2001
From: Hu Kejun <william.hu@rock-chips.com>
Date: Thu, 23 Aug 2018 16:10:24 +0800
Subject: [PATCH] media: i2c: gc0312: change sensor setting from 20fps to 30fps
 in vga size

Change-Id: I5c9f0df26af6597c4fa16199ecb40b9e6bf9bf1c
Signed-off-by: Hu Kejun <william.hu@rock-chips.com>
---
 drivers/media/i2c/gc0312.c | 131 +++++++++++++++++--------------------
 1 file changed, 61 insertions(+), 70 deletions(-)

diff --git a/drivers/media/i2c/gc0312.c b/drivers/media/i2c/gc0312.c
index cf4c74416d59..6cf3cc8552fb 100644
--- a/drivers/media/i2c/gc0312.c
+++ b/drivers/media/i2c/gc0312.c
@@ -147,19 +147,19 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x0f, 0x02},
 	{0x10, 0x88},
 	{0x16, 0x00},
-	{0x17, 0x17},
+	{0x17, 0x14},
 	{0x18, 0x1a},
 	{0x19, 0x14},
 	{0x1b, 0x48},
 	/*1c travis 20140929  update for lag*/
-	{0x1c, 0x6c},
+	{0x1c, 0x1c},
 	{0x1e, 0x6b},
 	{0x1f, 0x28},
 	/*0x89 travis20140801*/
 	{0x20, 0x8b},
 	{0x21, 0x49},
 	/*b0 travis 20140929 update for lag*/
-	{0x22, 0xd0},
+	{0x22, 0xb0},
 	{0x23, 0x04},
 	{0x24, 0x16},
 	{0x34, 0x20},
@@ -168,7 +168,7 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x26, 0x23},
 	{0x28, 0xff},
 	{0x29, 0x00},
-	/*{0x32, 0x04},*/
+	{0x32, 0x00},
 	{0x33, 0x10},
 	{0x37, 0x20},
 	{0x38, 0x10},
@@ -184,7 +184,7 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x44, 0x02},
 	{0x45, 0xa8},
 	/*sync 02*/
-	{0x46, 0x03},
+	{0x46, 0x02},
 	{0x4a, 0x11},
 	{0x4b, 0x01},
 	{0x4c, 0x20},
@@ -217,7 +217,7 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x92, 0x03},
 	{0x93, 0x03},
 	{0x94, 0x05},
-	{0x95, 0x66},
+	{0x95, 0x65},
 	{0x96, 0xf0},
 
 	/*ASDE*/
@@ -230,9 +230,9 @@ static const struct sensor_register gc0312_vga_regs[] = {
 
 	{0xa1, 0x30},
 	{0xa2, 0x32},
-	{0xa4, 0x30},
-	{0xa5, 0x30},
-	{0xaa, 0x10},
+	{0xa4, 0x80},
+	{0xa5, 0x28},
+	{0xaa, 0x30},
 	{0xac, 0x22},
 
 	/*GAMMA*/
@@ -259,7 +259,7 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0xd0, 0x40},
 	{0xd1, 0x34},
 	{0xd2, 0x34},
-	{0xd3, 0x45},
+	{0xd3, 0x40},
 	{0xd6, 0xf2},
 	{0xd7, 0x1b},
 	{0xd8, 0x18},
@@ -275,7 +275,7 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x0b, 0x11},
 	{0x0c, 0x00},
 	{0x12, 0x52},
-	{0x13, 0x40},
+	{0x13, 0x38},
 	{0x18, 0x95},
 	{0x19, 0x96},
 	{0x1f, 0x20},
@@ -287,6 +287,7 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x44, 0x02},
 
 	/*AWB*/
+	{0xfe, 0x01},
 	{0x1c, 0x91},
 	{0x21, 0x15},
 	{0x50, 0x80},
@@ -313,77 +314,67 @@ static const struct sensor_register gc0312_vga_regs[] = {
 	{0x7b, 0x50},
 	{0x7c, 0x0c},
 
-	{0xa4, 0xb9},
-	{0xa5, 0xa0},
 	{0x90, 0xc9},
 	{0x91, 0xbe},
-
-	{0xa6, 0xb8},
-	{0xa7, 0x95},
-	{0x92, 0xe6},
-	{0x93, 0xca},
-
-	{0xa9, 0xbc},
-	{0xaa, 0x95},
-	{0x95, 0x23},
-	{0x96, 0xe7},
-
+	{0x92, 0xe2},
+	{0x93, 0xc9},
+	{0x95, 0x1b},
+	{0x96, 0xe2},
+	{0x97, 0x49},
+	{0x98, 0x1b},
+	{0x9a, 0x49},
+	{0x9b, 0x1b},
+	{0x9c, 0xc3},
+	{0x9d, 0x49},
+	{0x9f, 0xc7},
+	{0xa0, 0xc8},
+	{0xa1, 0x00},
+	{0xa2, 0x00},
+	{0x86, 0x00},
+	{0x87, 0x00},
+	{0x88, 0x00},
+	{0x89, 0x00},
+	{0xa4, 0xb9},
+	{0xa5, 0xa0},
+	{0xa6, 0xba},
+	{0xa7, 0x92},
+	{0xa9, 0xba},
+	{0xaa, 0x80},
 	{0xab, 0x9d},
-	{0xac, 0x80},
-	{0x97, 0x43},
-	{0x98, 0x24},
-
-	{0xae, 0xb7},
-	{0xaf, 0x9e},
-	{0x9a, 0x43},
-	{0x9b, 0x24},
-
+	{0xac, 0x7f},
+	{0xae, 0xbb},
+	{0xaf, 0x9d},
 	{0xb0, 0xc8},
 	{0xb1, 0x97},
-	{0x9c, 0xc4},
-	{0x9d, 0x44},
-
 	{0xb3, 0xb7},
 	{0xb4, 0x7f},
-	{0x9f, 0xc7},
-	{0xa0, 0xc8},
-
 	{0xb5, 0x00},
 	{0xb6, 0x00},
-	{0xa1, 0x00},
-	{0xa2, 0x00},
-
-	{0x86, 0x60},
-	{0x87, 0x08},
-	{0x88, 0x00},
-	{0x89, 0x00},
-	{0x8b, 0xde},
-	{0x8c, 0x80},
+	{0x8b, 0x00},
+	{0x8c, 0x00},
 	{0x8d, 0x00},
 	{0x8e, 0x00},
-
 	{0x94, 0x55},
 	{0x99, 0xa6},
 	{0x9e, 0xaa},
 	{0xa3, 0x0a},
-	{0x8a, 0x0a},
+	{0x8a, 0x00},
 	{0xa8, 0x55},
 	{0xad, 0x55},
 	{0xb2, 0x55},
 	{0xb7, 0x05},
-	{0x8f, 0x05},
-
-	{0xb8, 0xcc},
-	{0xb9, 0x9a},
+	{0x8f, 0x00},
+	{0xb8, 0xcb},
+	{0xb9, 0x9b},
 	/*CC*/
 	{0xfe, 0x01},
 	/*skin white*/
 	{0xd0, 0x38},
-	{0xd1, 0xfd},
-	{0xd2, 0x06},
-	{0xd3, 0xf0},
-	{0xd4, 0x40},
-	{0xd5, 0x08},
+	{0xd1, 0x00},
+	{0xd2, 0x02},
+	{0xd3, 0x04},
+	{0xd4, 0x38},
+	{0xd5, 0x12},
 
 	{0xd6, 0x30},
 	{0xd7, 0x00},
@@ -434,31 +425,31 @@ static const struct sensor_register gc0312_vga_regs[] = {
 
 	/*banding*/
 	{0xfe, 0x00},
-	{0x05, 0x02},
+	{0x05, 0x00},
 	/*HB*/
-	{0x06, 0xd1},
+	{0x06, 0x90},
 	{0x07, 0x00},
 	/*VB*/
-	{0x08, 0x22},
+	{0x08, 0x31},
 
 	{0xfe, 0x01},
 	/*anti-flicker step [11:8]*/
 	{0x25, 0x00},
 	/*anti-flicker step [7:0]*/
-	{0x26, 0x6a},
+	{0x26, 0xb3},
 
-	/*exp level 0  20fps*/
+	/*exp level 0 */
 	{0x27, 0x02},
-	{0x28, 0x12},
-	/*exp level 1  12.50fps*/
+	{0x28, 0x19},
+	/*exp level 1 */
 	{0x29, 0x02},
-	{0x2a, 0x12},
+	{0x2a, 0x19},
 	/*7.14fps*/
 	{0x2b, 0x02},
-	{0x2c, 0x12},
-	/*exp level 3  5.55fps*/
+	{0x2c, 0x19},
+	/*exp level 3 */
 	{0x2d, 0x02},
-	{0x2e, 0x12},
+	{0x2e, 0x19},
 	{0x3c, 0x20},
 	{0xfe, 0x00},
 
-- 
2.35.3

